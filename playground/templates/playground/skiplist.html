{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Skip List Playground</title>
    <link rel="stylesheet" href="{% static 'playground/css/style.css' %}">
</head>
<body>
    <div class="skiplist-container">
        <h1>Welcome to the Skip List Playground</h1>

        <div class="skiplist-controls">
            <div class="input-area">
                <input type="number" id="valueInput" placeholder="Enter value" />
            </div>
            <div class="button-area">
                <button onclick="insertValue()">Insert</button>
                <button onclick="deleteValue()">Delete</button>
                <button onclick="searchValue()">Search</button>
                <button onclick="resetSkipList()">Reset</button>
            </div>
        </div>

        <div id="skipListDisplay" class="empty">Skip list is empty.</div>
    </div>

<script>
    let skipList = [];

    function updateDisplay() {
        const display = document.getElementById('skipListDisplay');
        display.innerHTML = '';

        if (skipList.length === 0) {
            display.classList.add('empty');
            display.textContent = 'Skip list is empty.';
            return;
        }

        display.classList.remove('empty');

        // Display as arrow-separated values (like levels visually simplified)
        const listString = skipList.join(' â†’ ');
        display.textContent = listString;
    }

    function insertValue() {
        const input = document.getElementById('valueInput');
        const val = Number(input.value.trim());
        if (input.value.trim() === '' || isNaN(val)) {
            alert('Please enter a valid number.');
            return;
        }
        if (!skipList.includes(val)) {
            skipList.push(val);
            skipList.sort((a, b) => a - b);
            updateDisplay();
        } else {
            alert('Value already exists in the skip list.');
        }
        input.value = '';
    }

    function deleteValue() {
        const input = document.getElementById('valueInput');
        const val = Number(input.value.trim());
        if (input.value.trim() === '' || isNaN(val)) {
            alert('Please enter a valid number.');
            return;
        }
        const index = skipList.indexOf(val);
        if (index !== -1) {
            skipList.splice(index, 1);
            updateDisplay();
        } else {
            alert('Value not found in the skip list.');
        }
        input.value = '';
    }

    function searchValue() {
        const input = document.getElementById('valueInput');
        const val = Number(input.value.trim());
        if (input.value.trim() === '' || isNaN(val)) {
            alert('Please enter a valid number.');
            return;
        }
        if (skipList.includes(val)) {
            alert(`Value ${val} found in the skip list.`);
        } else {
            alert(`Value ${val} NOT found.`);
        }
        input.value = '';
    }

    function resetSkipList() {
        skipList = [];
        updateDisplay();
    }

    updateDisplay();
</script>
</body>
</html>
