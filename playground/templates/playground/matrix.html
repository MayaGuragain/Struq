{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Matrix Playground</title>
  <link rel="stylesheet" href="{% static 'playground/css/style.css' %}">
  <style>
    .matrix-grid {
      display: inline-grid;
      gap: 4px;
      margin-top: 10px;
    }
    .matrix-cell {
      width: 40px;
      height: 40px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Matrix (2D Array) Playground</h1>
  <p>Visualize rows and columns and perform operations like transpose and rotation.</p>

  <div>
    Rows: <input type="number" id="rows" min="1" max="10" value="3" />
    Columns: <input type="number" id="cols" min="1" max="10" value="3" />
    <button onclick="initMatrix()">Initialize Matrix</button>
    <button onclick="transposeMatrix()">Transpose</button>
    <button onclick="rotateMatrix()">Rotate 90Â°</button>
    <button onclick="resetMatrix()">Reset</button>
  </div>

  <div id="matrixArea"></div>

  <script>
    let matrix = [];
    let rowCount = 3;
    let colCount = 3;

    function initMatrix() {
      rowCount = parseInt(document.getElementById('rows').value);
      colCount = parseInt(document.getElementById('cols').value);
      matrix = Array.from({ length: rowCount }, () => Array(colCount).fill(''));
      renderMatrix();
    }

    function renderMatrix() {
      const container = document.getElementById('matrixArea');
      container.innerHTML = '';

      const grid = document.createElement('div');
      grid.className = 'matrix-grid';
      grid.style.gridTemplateColumns = `repeat(${colCount}, auto)`;

      for (let i = 0; i < rowCount; i++) {
        for (let j = 0; j < colCount; j++) {
          const input = document.createElement('input');
          input.className = 'matrix-cell';
          input.value = matrix[i][j];
          input.dataset.row = i;
          input.dataset.col = j;
          input.addEventListener('input', (e) => {
            const r = parseInt(e.target.dataset.row);
            const c = parseInt(e.target.dataset.col);
            matrix[r][c] = e.target.value;
          });
          grid.appendChild(input);
        }
      }

      container.appendChild(grid);
    }

    function transposeMatrix() {
      matrix = matrix[0].map((_, colIndex) => matrix.map(row => row[colIndex]));
      [rowCount, colCount] = [colCount, rowCount];
      renderMatrix();
    }

    function rotateMatrix() {
      matrix = matrix[0].map((_, i) => matrix.map(row => row[i]).reverse());
      [rowCount, colCount] = [colCount, rowCount];
      renderMatrix();
    }

    function resetMatrix() {
      matrix = [];
      document.getElementById('matrixArea').innerHTML = 'Matrix cleared.';
    }

    // Initialize by default
    initMatrix();
  </script>
</body>
</html>
